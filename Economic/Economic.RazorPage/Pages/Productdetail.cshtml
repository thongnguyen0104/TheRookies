@page
@model ProductdetailModel
@{
}

<div class="small-container single-product">
        <div class="row">
            <div class="col-2">

                <img style="height: 316.66px; " src="~/public/img/products/@Model._homeViewModels.Product.ProductImages[0].ProductPath" alt="gallery" width="100%" id="ProductImg">

                <div class="small-img-row">
                    <div class="small-img-col">
                        <img style="height: 76px; object-fit: cover" src="~/public/img/products/@Model._homeViewModels.Product.ProductImages[1].ProductPath" alt="gallery" width="100%" class="small-img">
                    </div>
                    <div class="small-img-col">
                        <img style="height: 76px; object-fit: cover" src="~/public/img/products/@Model._homeViewModels.Product.ProductImages[2].ProductPath" alt="gallery" width="100%" class="small-img">
                    </div>
                    <div class="small-img-col">
                        <img style="height: 76px; object-fit: cover" src="~/public/img/products/@Model._homeViewModels.Product.ProductImages[3].ProductPath" alt="gallery" width="100%" class="small-img">
                    </div>
                    <div class="small-img-col">
                        <img style="height: 76px; object-fit: cover" src="~/public/img/products/@Model._homeViewModels.Product.ProductImages[1].ProductPath" alt="gallery" width="100%" class="small-img">
                    </div>
                </div>
            </div>
            <div class="col-2">
                <p><a href="">Trang chủ</a> / <a href="">Sản phẩm</a></p>
                <h1 style="font-size: 35px; line-height: 38px">@Model._homeViewModels.Product.Name</h1>
                <span class="giamgia">@Model._homeViewModels.Product.Price</span>
                <h4>@Model._homeViewModels.Product.Price</h4>
                <input type="number" value="1" min="1">
                <a style="cursor: pointer" class="btn">+Thêm vào giỏ hàng</a>
                <h3>Mô tả sản phẩm <i class="fa fa-indent"></i> </h3>
                <br>
                <p>@Model._homeViewModels.Product.Description</p>
            </div>
        </div>
    </div>

<!-- Commnet -->
<div class="small-container">
        <h2 class="title row cmt-tittle">
            ĐÁNH GIÁ SẢN PHẨM
        </h2>
        <br>
        <?php if ($data['comments'] != "Chưa có đánh giá nào") : ?>
            <?php foreach ($data['comments'] as $index => $comment) : ?>
                <div class="small-container" style="border-bottom: 1px solid rgb(187, 183, 183);">
                    <div class="row">
                        <div>
                            <img class="cmt-image" src="<?= USER_AVATAR_URL ?>/<?= ($comment['avatar'] !="") ? $comment['avatar'] :  "default/default-avatar.png" ?>" alt="user-image">
                        </div>
                        <div>
                            <span hidden id="user-cmt-star"><?= $comment['star']?></span>
                            <div style="width: 200px;" ><?= $comment['name'] ?></div>
                            <?php for ($i=0; $i < $comment['star']; $i++) : ?>
                                <i class="fa fa-star" style="color: orange;"></i>
                            <?php endfor; ?>
                            <?php for ($i=0; $i < (5 - $comment['star']); $i++) : ?>
                                <i class="fa fa-star-o" style="color: orange;"></i>
                            <?php endfor; ?>
                        </div>
                        <div><?= $comment['date'] ?></div>

                        <div onclick = "editComment()" id="editComment" class="
                            <?php if(isset($_SESSION['user']['id'])) : ?>
                                <?php if($_SESSION['user']['id'] == $comment['id_user']) : ?>
                                    <?= "user-cmt-edit" . $comment['id'] ?>
                                <?php endif; ?>
                            <?php endif; ?>
                            "
                            style= "color: #ff523b; cursor: pointer;">
                            Sửa
                        </div>
                        
                    </div>
                    <div class="cmt-content">
                        <?= $comment['content'] ?>
                    </div>
                </div>
                <br>
            <?php endforeach; ?>
        <?php else : ?>
            <div class="small-container" style="border: 1px solid rgb(187, 183, 183);">
                <?= "Chưa có đánh giá nào"?>
            </div>
        <?php endif; ?>
        <br>

        <div class="row">
            <?php if($_SESSION) : ?>
                <div onload = "loadComment()" class="container-star">

                    <div class="container_post">
                        <div class="container_post-text">Cảm ơn bạn đánh giá!</div>
                    </div>

                    <div class="container_star-widget">
                        <input onclick = "Comment()" type="radio" name="rate" class="rank-star" id="rate-5">
                        <label for="rate-5" class="fa fa-star"></label>

                        <input onclick = "Comment()" type="radio" name="rate" class="rank-star" id="rate-4">
                        <label for="rate-4" class="fa fa-star"></label>

                        <input onclick = "Comment()" type="radio" name="rate" class="rank-star" id="rate-3">
                        <label for="rate-3" class="fa fa-star"></label>

                        <input onclick = "Comment()" type="radio" name="rate" class="rank-star" id="rate-2">
                        <label for="rate-2" class="fa fa-star"></label>

                        <input onclick = "Comment()" type="radio" name="rate" class="rank-star" id="rate-1">
                        <label for="rate-1" class="fa fa-star"></label>
                            
                        <form class="container_star-widget-form" action="<?= DOCUMENT_ROOT ?>/products/evaluation/<?= $data['products']['id'] ?>" method="post" enctype="multipart/form-data">
                            <input id="form-star-input" hidden name="star-rank" value="0">
                            <header class="cmt-like"></header>
                            <span hidden class="form-cmt-rank" style="color: #fff;">
                            </span>
                            <div class="textarea">
                                <textarea name="content" id="" cols="30" placeholder="Nhận xét của bạn ... "></textarea>
                            </div>

                            <div class="form-btn" type="submit" disabled>
                                <button class="form-button">
                                        THỰC HIỆN
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            <?php endif; ?>
            
        </div>

</div>